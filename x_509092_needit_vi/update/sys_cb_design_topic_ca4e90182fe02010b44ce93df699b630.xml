<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="_PRVW__024e901825e02010e8aa22f639929c2d">c24e90182fe02010b44ce93df699b62e</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"6817789060874647bf4dab8582339b48","triggerType":"request","applicability":{"type":"Applicability","mode":"script","value":"true"},"id":"6817789060874647bf4dab8582339b48"}],"goals":[{"name":"primary","trigger_id":"6817789060874647bf4dab8582339b48","nodes":[{"type":"StartGoal","goal_id":"7fbda3f9e5c34d0cb16baf30debd8bb7","greeting_msg":{"type":"String","mode":"string","value":"I can help you find and update NeedIt records for a type of request."},"id":"b00d558a34ca4146adc2568beac9f884","name":"Start"},{"type":"TerminateGoal","goal_id":"7fbda3f9e5c34d0cb16baf30debd8bb7","confirmation_msg":{"type":"String","mode":"string","value":"Ask again when you need to update other NeedIt records"},"id":"547e6056e24e4f2aa05f943e525e309d","name":"End"},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"2ac77abb52434e3e8229899af6869898","name":"NeedIt Type","goal_id":"7fbda3f9e5c34d0cb16baf30debd8bb7","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"bfcd345f03224ac8a16dbd00ce20ab88","message":{"type":"String","mode":"string","value":"Which type of NeedIt record would you like to view?"},"optional":false,"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false}},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n\t    // Return the display value (Label) for the needit_type choice\n\t    return 'You selected: ' + vaInputs.needit_type.getDisplayValue();\n\t})()\n\n"},"id":"c1d9992aa62548908bffaf234bdb96c4","name":"Confirm NeedIt Type","goal_id":"7fbda3f9e5c34d0cb16baf30debd8bb7","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"445e1148600e4ba2bfd6ac03d15f8980","name":"NeedIt List","goal_id":"7fbda3f9e5c34d0cb16baf30debd8bb7","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"16fcecef65094034a83e61704fb0bdce","message":{"type":"String","mode":"string","value":"Select a NeedIt record to view."},"optional":false,"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false},"expression_mode":"script","script":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for. Order the results by the When needed value.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.orderBy('u_when_needed');\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number, u_when_needed, and \t\t    // short_description values for the NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n\t})(table)\n\n","no_options_found_message":{"type":"String","mode":"string","value":"You have no open NeedIt records."},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n\t\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for. Order the results by the When needed value.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.orderBy('u_when_needed');\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number, u_when_needed, and \t\t    // short_description values for the NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n\t\n\t})(table)\n\n"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"16fcecef65094034a83e61704fb0bdce","fields":["priority","short_description","u_when_needed"],"id":"b91b008632784a4190c48ac2fa91da86","name":"NeedIt Card","goal_id":"7fbda3f9e5c34d0cb16baf30debd8bb7","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"","value":""}},{"type":"InputPrompt","variable_id":"51c0f98ca3c841f7bf6c41b4d6b3585c","message":{"type":"String","mode":"string","value":"Would you like to update another NeedIt Records?"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false},"optional":false,"id":"1c5d1708cd984e0dbc84ead1c6ee8884","name":"Seach Again","goal_id":"7fbda3f9e5c34d0cb16baf30debd8bb7","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Find more NeedIt records?","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"seach_again="},"id":"45392bdb270a42308c9326614b52a59e","name":"No"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"seach_again=true"},"id":"52049bf5a133465a9e867f163bbd1578","name":"Yes"}],"id":"c4d548f1dee245ffb34783eeaea50b94","goal_id":"7fbda3f9e5c34d0cb16baf30debd8bb7"},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"16fcecef65094034a83e61704fb0bdce","fields":["u_when_needed","short_description"],"id":"9ccc5225fe7f4244b9b195b44a973af4","name":"Updated NeedIt","goal_id":"7fbda3f9e5c34d0cb16baf30debd8bb7","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"","value":""}},{"type":"Decision","name":"Decision","branches":[{"type":"Branch","label":"Nothing","expression":{"type":"Applicability","mode":"query","value":"needit_change=nothing"},"id":"557f49afd1834d55a4d419429de04498","name":"Nothing"},{"type":"Branch","label":"When Needed Date","expression":{"type":"Applicability","mode":"query","value":"needit_change=when needed date"},"id":"e76142792ee14d3eaff23cd2ea546b62","name":"When Needed Date"},{"type":"Branch","label":"Short Description","expression":{"type":"Applicability","mode":"query","value":"needit_change=short description"},"id":"a90b16987f214af8a94aa79301774444","name":"Short Description"}],"id":"c190d55c6c744362ae1648ad0f5c7759","goal_id":"7fbda3f9e5c34d0cb16baf30debd8bb7"},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"21014df86db0412ba3d8e0b0553be9e4","name":"NeedIt change","goal_id":"7fbda3f9e5c34d0cb16baf30debd8bb7","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"a5f01446699a4590a716d233efa15c3d","message":{"type":"String","mode":"string","value":"Which field do you want to change?"},"optional":false,"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false}},{"type":"InputPrompt","variable_id":"b7fbc759a3074cf0ba47a2a20a4a4c07","message":{"type":"String","mode":"string","value":"When do you need the NeedIt completed?"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false},"optional":false,"id":"26c60f1733cf4edba5c852a3f39c025a","name":"New When Needed Date","goal_id":"7fbda3f9e5c34d0cb16baf30debd8bb7","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"16fcecef65094034a83e61704fb0bdce","id":"05cc1245d12c4bf38a1c974e61a58f08","name":"Change When Needed Date","goal_id":"7fbda3f9e5c34d0cb16baf30debd8bb7","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"InputPrompt","variable_id":"ef2d6a2a066f4431814b79ff126d6f87","message":{"type":"String","mode":"string","value":"What is the new short description?"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false},"optional":false,"id":"5d991333a5da4d53a01369186db35a71","name":"New Short Description","goal_id":"7fbda3f9e5c34d0cb16baf30debd8bb7","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"CRUDAction","mode":"update","query":"short_description={{vaInputs.new_short_description}}","variable_id":"16fcecef65094034a83e61704fb0bdce","id":"b7766bf33a224b3fae5019b8bfa4cb7a","name":"Change Short Decription","goal_id":"7fbda3f9e5c34d0cb16baf30debd8bb7","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"OutputPrompt","value":{"type":"String","mode":"string","value":"{{vaInputs.new_short_description}}"},"id":"54bfe13c2c5c4bccb35047ff3d532d42","name":"New short Description","goal_id":"7fbda3f9e5c34d0cb16baf30debd8bb7","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","script":"(function execute() {\n\t    // Add 1 to the search_count variable\n\t    vaVars.search_count = vaVars.search_count + 1;\n\t})()\n\n","id":"357b74771fcb41e9a47fe3e9319450a4","name":"Update search_count","goal_id":"7fbda3f9e5c34d0cb16baf30debd8bb7","applicability":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    // If the value of search_count is less than 3, return true\n\t    // otherwise, return false\n\t    if (vaVars.search_count &lt; 3)\n\t        return true;\n\t    else\n\t        return false;\n\t})()\n\n"}},{"type":"Decision","name":"Search count is greater or less than 3?","branches":[{"type":"Branch","label":"Less than 3","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    // If the value of search_count is less than 3, return true\n\t    // otherwise, return false\n\t    if (vaVars.search_count &lt; 3)\n\t        return true;\n\t    else\n\t        return false;\n\t})()\n"},"id":"fe168434e6054c16af63f3e8ff093a40","name":"Less than 3"},{"type":"Branch","label":" 3 or greater than 3","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    // If the value of search_count is less than 3, return true\n\t    // otherwise, return false\n\t    if (vaVars.search_count &gt;= 3)\n\t        return false;\n\t    else\n\t        return true;\n\t})()\n\n"},"id":"c8f34d96a294440b8e187696f0e5c55d","name":" 3 or greater than 3"}],"id":"4ab63de781044e888927f49d7a32e692","goal_id":"7fbda3f9e5c34d0cb16baf30debd8bb7"},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n\t    // If Live Chat is available, inform users they will be transfered to a live agent\n\t    // otherwise, let them know how to work with more NeedIt records\n\t    if (vaSystem.isLiveAgentAvailable()){\n\t        return 'You have reached your NeedIt search quota. I will transfer you to a live agent for assistance.'\n\t    } else {\n\t        return 'You have reached your NeedIt search quota. If you need to work with multiple NeedIt records, open NeedIt &gt; My NeedIt Requests.'\n\t    }\n\t})()\n\n"},"id":"43ec186066134dc186416d6d6b769f34","name":"Quota Reached","goal_id":"7fbda3f9e5c34d0cb16baf30debd8bb7","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","script":"(function execute() {\n\t    // Transfer to a live agent\n\t    vaSystem.connectToAgent()\n\t})()\n\n","id":"576c571f8b10423396317e541b722e8b","name":"Transfer to Agent","goal_id":"7fbda3f9e5c34d0cb16baf30debd8bb7","applicability":{"type":"Applicability","mode":"script","value":"(function execute() {\n\t    // If Live Chat is available, return true\n\t    // otherwise, return false\n\t    if (vaSystem.isLiveAgentAvailable()){\n\t        return true;\n\t    } else {\n\t        return false;\n\t    }\n\t})()\n\n"}}],"edges":[{"type":"Edge","source_node_id":"21014df86db0412ba3d8e0b0553be9e4","target_node_id":"c190d55c6c744362ae1648ad0f5c7759","id":"d456daab0e384603905e5a07f01d5a70"},{"type":"Edge","source_node_id":"54bfe13c2c5c4bccb35047ff3d532d42","target_node_id":"9ccc5225fe7f4244b9b195b44a973af4","id":"e445b411c4b04644ad3efb668f3f9176"},{"type":"Edge","source_node_id":"05cc1245d12c4bf38a1c974e61a58f08","target_node_id":"9ccc5225fe7f4244b9b195b44a973af4","id":"b3e0d8b14ae546b4a345fec1291e96a1"},{"type":"Edge","source_node_id":"b91b008632784a4190c48ac2fa91da86","target_node_id":"21014df86db0412ba3d8e0b0553be9e4","id":"0c15d4eb838b49a7b7dc05224ef2ffbf"},{"type":"Edge","source_node_id":"9ccc5225fe7f4244b9b195b44a973af4","target_node_id":"1c5d1708cd984e0dbc84ead1c6ee8884","id":"3494c176e3434a15be68b40fde9faa11"},{"type":"Edge","source_node_id":"b00d558a34ca4146adc2568beac9f884","target_node_id":"2ac77abb52434e3e8229899af6869898","id":"c399f8e0ec094ab3959781174993d76d"},{"type":"Edge","source_node_id":"2ac77abb52434e3e8229899af6869898","target_node_id":"c1d9992aa62548908bffaf234bdb96c4","id":"658ea718958d4ef8825856c5795aa001"},{"type":"Edge","source_node_id":"c1d9992aa62548908bffaf234bdb96c4","target_node_id":"445e1148600e4ba2bfd6ac03d15f8980","id":"7f235927396a40729d1ccac68c48bba1"},{"type":"Edge","source_node_id":"445e1148600e4ba2bfd6ac03d15f8980","target_node_id":"b91b008632784a4190c48ac2fa91da86","id":"dc72f745dc684a9488bb03876430c78d"},{"type":"Edge","source_node_id":"1c5d1708cd984e0dbc84ead1c6ee8884","target_node_id":"c4d548f1dee245ffb34783eeaea50b94","id":"805434c91f47447a9345cc0de99b1d75"},{"type":"Edge","source_node_id":"c4d548f1dee245ffb34783eeaea50b94","target_node_id":"547e6056e24e4f2aa05f943e525e309d","branch_id":"45392bdb270a42308c9326614b52a59e","id":"ddfb870eec41457ab8d9f39e99de7e69","name":"45392bdb270a42308c9326614b52a59e"},{"type":"Edge","source_node_id":"c190d55c6c744362ae1648ad0f5c7759","target_node_id":"547e6056e24e4f2aa05f943e525e309d","branch_id":"557f49afd1834d55a4d419429de04498","id":"1f2c87618c6a4915b2eec66d305e8f4d","name":"557f49afd1834d55a4d419429de04498"},{"type":"Edge","source_node_id":"c190d55c6c744362ae1648ad0f5c7759","target_node_id":"26c60f1733cf4edba5c852a3f39c025a","branch_id":"e76142792ee14d3eaff23cd2ea546b62","id":"9348d16b768f44079b86bea2ea69a443","name":"e76142792ee14d3eaff23cd2ea546b62"},{"type":"Edge","source_node_id":"26c60f1733cf4edba5c852a3f39c025a","target_node_id":"05cc1245d12c4bf38a1c974e61a58f08","id":"5565c121a0c34a078ce4ff609c0779f1"},{"type":"Edge","source_node_id":"c190d55c6c744362ae1648ad0f5c7759","target_node_id":"5d991333a5da4d53a01369186db35a71","branch_id":"a90b16987f214af8a94aa79301774444","id":"cea312da5efc4b949395ba6dc5c2e2f0","name":"a90b16987f214af8a94aa79301774444"},{"type":"Edge","source_node_id":"5d991333a5da4d53a01369186db35a71","target_node_id":"b7766bf33a224b3fae5019b8bfa4cb7a","id":"320a0908f4324e70b5a0d0ae2b215dce"},{"type":"Edge","source_node_id":"b7766bf33a224b3fae5019b8bfa4cb7a","target_node_id":"54bfe13c2c5c4bccb35047ff3d532d42","id":"4e35e2225387468e87b0b2316e8e51e6"},{"type":"Edge","source_node_id":"c4d548f1dee245ffb34783eeaea50b94","target_node_id":"357b74771fcb41e9a47fe3e9319450a4","branch_id":"52049bf5a133465a9e867f163bbd1578","id":"b5f98221140b4eb3854902e0af3f69a1","name":"52049bf5a133465a9e867f163bbd1578"},{"type":"Edge","source_node_id":"357b74771fcb41e9a47fe3e9319450a4","target_node_id":"4ab63de781044e888927f49d7a32e692","id":"fbcbd765f9354980a51140ca87412988"},{"type":"Edge","source_node_id":"4ab63de781044e888927f49d7a32e692","target_node_id":"2ac77abb52434e3e8229899af6869898","branch_id":"fe168434e6054c16af63f3e8ff093a40","id":"901157aef22848539979c897618a9b33","name":"fe168434e6054c16af63f3e8ff093a40"},{"type":"Edge","source_node_id":"4ab63de781044e888927f49d7a32e692","target_node_id":"43ec186066134dc186416d6d6b769f34","branch_id":"c8f34d96a294440b8e187696f0e5c55d","id":"77df2fbc4a464bc8b6f3b04e315d6bd1","name":"c8f34d96a294440b8e187696f0e5c55d"},{"type":"Edge","source_node_id":"43ec186066134dc186416d6d6b769f34","target_node_id":"576c571f8b10423396317e541b722e8b","id":"842cbb68d3344201ba9a1e8956a70dc8"},{"type":"Edge","source_node_id":"576c571f8b10423396317e541b722e8b","target_node_id":"547e6056e24e4f2aa05f943e525e309d","id":"2a8f6edc47bc4cd29aac117f90cbc372"}],"id":"7fbda3f9e5c34d0cb16baf30debd8bb7"}],"script_variables":[{"type":"String","name":"search_count","value":{"type":"String","mode":"string","value":"0"},"id":"b17675689acf4897a443cb272f4ddf52"}],"glide_variables":[{"type":"Reference","table":"sys_user","id":"92248e55771b4122a752f5b32d026c1d","name":"user"},{"type":"Choice","choices":[{"name":"Legal","element":"legal"},{"name":"Facilities","element":"facilities"},{"name":"Human Resources","element":"human resources"}],"id":"bfcd345f03224ac8a16dbd00ce20ab88","name":"needit_type"},{"type":"Reference","table":"x_58872_needit_needit","id":"16fcecef65094034a83e61704fb0bdce","name":"needit_list"},{"type":"True/False","id":"51c0f98ca3c841f7bf6c41b4d6b3585c","name":"seach_again"},{"type":"Choice","choices":[{"name":"Short description","element":"short description"},{"name":"When needed date","element":"when needed date"},{"name":"Nothing","element":"nothing"}],"id":"a5f01446699a4590a716d233efa15c3d","name":"needit_change"},{"type":"Date/Time","mode":"date","id":"b7fbc759a3074cf0ba47a2a20a4a4c07","name":"new_when_needed_date"},{"type":"Reference","table":"","id":"aa824d909ec04fd68565e24182e77df1","name":"change_when_needed_date"},{"type":"String","name":"new_short_description","id":"ef2d6a2a066f4431814b79ff126d6f87"},{"type":"Reference","table":"","id":"53d3953fd9094ea5b1ce0b2ec1c74695","name":"change_short_decription"}],"applicability":{"type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"1b0e03a32f542010b44ce93df699b68f","domain":"global","id":"4ad99f882f202010b44ce93df699b615","name":"_PRVW__024e901825e02010e8aa22f639929c2d","key_phrases":["Update NeedIt Records","Update NeedIt Records","NeedIt Request"],"nlu_provider":"","nlu_model":"","nlu_model_label":"","nlu_intent":"","nlu_intent_label":"","flexible_conversation_switching":false,"design_category":"f34e0f272f542010b44ce93df699b6d6","library":false}</design_definition>
        <design_topic_id>4ad99f882f202010b44ce93df699b615</design_topic_id>
        <name>_PRVW__024e901825e02010e8aa22f639929c2d</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2020-11-13 20:42:57</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>ca4e90182fe02010b44ce93df699b630</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_509092_needit_vi">1b0e03a32f542010b44ce93df699b68f</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">1b0e03a32f542010b44ce93df699b68f</sys_scope>
        <sys_update_name>sys_cb_design_topic_ca4e90182fe02010b44ce93df699b630</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2020-11-13 20:42:57</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
